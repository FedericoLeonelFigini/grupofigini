<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Carrito de compras ‚Ä¢ Demo</title>
  <style>
    /*
      =====================================
      ESTILOS B√ÅSICOS (pasteles, limpio)
      =====================================
    */
    :root{
      --bg:#f7f9fc;
      --card:#ffffff;
      --text:#1f2937;
      --muted:#6b7280;
      --brand:#7c9cff;      /* azul pastel */
      --brand-2:#a3e5c3;    /* verde pastel */
      --danger:#ef4444;
      --shadow:0 10px 25px rgba(0,0,0,.06);
      --radius:18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Inter,Arial;
      color:var(--text); background:linear-gradient(140deg, var(--bg), #eef5ff 40%, #f7fffb);
    }
    a{color:inherit}
    .container{max-width:1100px; margin:auto; padding:24px}

    header{
      display:flex; align-items:center; justify-content:space-between; gap:16px;
      padding:16px 0; position:sticky; top:0; backdrop-filter:saturate(1.4) blur(6px);
    }
    .logo{
      display:flex; align-items:center; gap:10px; font-weight:700; letter-spacing:.3px;
    }
    .logo-badge{width:36px; height:36px; border-radius:12px; background:linear-gradient(135deg, var(--brand), var(--brand-2)); box-shadow:var(--shadow)}

    .cart-btn{
      position:relative; border:0; background:var(--text); color:#fff; padding:10px 14px; border-radius:14px; cursor:pointer; font-weight:600;
      box-shadow:var(--shadow);
    }
    .cart-count{ position:absolute; top:-8px; right:-8px; background:var(--danger); color:#fff; min-width:22px; height:22px; padding:0 6px; border-radius:999px; display:grid; place-items:center; font-size:12px; font-weight:700; }

    .grid{ display:grid; grid-template-columns:repeat(12,1fr); gap:16px; }

    .card{
      grid-column:span 4; background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow);
      overflow:hidden; display:flex; flex-direction:column; transition:transform .15s ease;
    }
    .card:hover{ transform:translateY(-2px) }
    .card img{ width:100%; aspect-ratio: 16/11; object-fit:cover; background:#ddd }
    .card .content{ padding:14px; display:grid; gap:8px }
    .price{ font-weight:800 }
    .muted{ color:var(--muted); font-size:.95rem }
    .actions{ display:flex; gap:10px; margin-top:8px }
    .btn{
      border:0; border-radius:12px; padding:10px 12px; cursor:pointer; font-weight:700; box-shadow:var(--shadow);
      background:var(--brand); color:#0b2543;
    }
    .btn.secondary{ background:#e7efff }

    /* Panel del carrito (off-canvas) */
    .drawer{
      position:fixed; inset:0; pointer-events:none; z-index:50;
    }
    .drawer.open{ pointer-events:auto }
    .drawer-backdrop{
      position:absolute; inset:0; background:rgba(15,23,42,.45); opacity:0; transition:opacity .2s ease;
    }
    .drawer.open .drawer-backdrop{ opacity:1 }
    .drawer-panel{
      position:absolute; top:0; right:-420px; width:420px; max-width:100%; height:100%; background:#fff; box-shadow: -8px 0 30px rgba(0,0,0,.15);
      border-radius:20px 0 0 20px; display:flex; flex-direction:column; transition:right .25s ease;
    }
    .drawer.open .drawer-panel{ right:0 }

    .drawer-header{ display:flex; align-items:center; justify-content:space-between; padding:16px 18px; border-bottom:1px solid #eef2f7 }
    .drawer-body{ padding:14px; overflow:auto; display:flex; flex-direction:column; gap:12px }
    .drawer-footer{ padding:14px; border-top:1px solid #eef2f7; display:grid; gap:10px; background:linear-gradient(#fff, #f7fafe) }

    .line{ display:grid; grid-template-columns:56px 1fr auto; gap:12px; align-items:center; background:#f8fbff; border:1px solid #eef3ff; border-radius:14px; padding:8px }
    .line img{ width:56px; height:56px; object-fit:cover; border-radius:12px; background:#ddd }
    .line .name{ font-weight:700 }
    .qty{
      display:inline-flex; align-items:center; border-radius:12px; border:1px solid #e5e7eb; overflow:hidden; background:#fff
    }
    .qty button{ border:0; width:30px; height:30px; cursor:pointer; background:#f3f4f6; font-weight:800 }
    .qty input{ width:36px; border:0; text-align:center; font-weight:700; background:#fff }

    .totals{ display:grid; grid-template-columns:1fr auto; gap:6px; font-weight:700 }
    .danger{ background: #ffe2e2; color:#7a0d0d }
    .whatsapp{ background:#25D366; color:#053c16 }

    /* Responsive */
    @media (max-width: 900px){ .card{ grid-column:span 6 } }
    @media (max-width: 600px){ .card{ grid-column:span 12 } }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">
        <div class="logo-badge"></div>
        <div>
          <div style="font-size:18px">Mi Tienda</div>
          <div class="muted" style="font-size:12px">Demo de carrito con JS puro</div>
        </div>
      </div>
      <button class="cart-btn" id="openCart">
        üõí Carrito <span class="cart-count" id="cartCount">0</span>
      </button>
    </header>

    <!-- Cat√°logo de ejemplo -->
    <section class="grid" id="catalog">
      <!-- Los productos podr√≠an venir de una API; aqu√≠ hay ejemplos -->
    </section>

    <!-- Agregar producto personalizado r√°pido (opcional) -->
    <section style="margin-top:24px; background:var(--card); padding:16px; border-radius:var(--radius); box-shadow:var(--shadow); display:grid; gap:12px">
      <h3 style="margin:0">Agregar producto personalizado</h3>
      <div style="display:grid; grid-template-columns:1fr 140px 140px; gap:10px">
        <input id="customName" placeholder="Nombre" />
        <input id="customPrice" placeholder="Precio (ARS)" type="number" min="0" step="0.01" />
        <button class="btn" id="addCustom">Agregar al carrito</button>
      </div>
      <small class="muted">√ötil para testear r√°pido el carrito sin tocar el cat√°logo.</small>
    </section>
  </div>

  <!-- Drawer / Panel del carrito -->
  <div class="drawer" id="drawer">
    <div class="drawer-backdrop" id="backdrop"></div>
    <aside class="drawer-panel">
      <div class="drawer-header">
        <strong>Tu carrito</strong>
        <button class="btn secondary" id="closeCart">Cerrar</button>
      </div>
      <div class="drawer-body" id="cartLines">
        <div class="muted">No hay productos en el carrito.</div>
      </div>
      <div class="drawer-footer">
        <div class="totals">
          <div>Total</div>
          <div id="totalText">$0,00</div>
        </div>
        <button class="btn whatsapp" id="checkoutWa">Comprar por WhatsApp</button>
        <button class="btn danger" id="clearCart">Vaciar carrito</button>
      </div>
    </aside>
  </div>

  <script>
    // ===================================================
    //  Carrito de compras ‚Äî JS puro, con localStorage
    //  Comentado en espa√±ol para aprendizaje r√°pido
    // ===================================================

    // Configur√° tu n√∫mero de WhatsApp aqu√≠ (solo d√≠gitos, con pa√≠s):
    const PHONE = "5492262629001"; // ej.: Argentina +54 9 2262 629001 -> "5492262629001"

    // Formateo de moneda ARS
    const ARS = new Intl.NumberFormat('es-AR', { style: 'currency', currency: 'ARS' });

    // Cat√°logo de ejemplo (pod√©s reemplazarlo por fetch a tu API)
    const PRODUCTS = [
      { id: 'p1', name: 'Landing Page', price: 120000, img: 'https://images.unsplash.com/photo-1525547719571-a2d4ac8945e2?q=80&w=1200&auto=format&fit=crop' },
      { id: 'p2', name: 'E-commerce', price: 450000, img: 'https://images.unsplash.com/photo-1461749280684-dccba630e2f6?q=80&w=1200&auto=format&fit=crop' },
      { id: 'p3', name: 'Mantenimiento Mensual', price: 60000, img: 'https://images.unsplash.com/photo-1515879218367-8466d910aaa4?q=80&w=1200&auto=format&fit=crop' },
      { id: 'p4', name: 'SEO Inicial', price: 90000, img: 'https://images.unsplash.com/photo-1454165205744-3b78555e5572?q=80&w=1200&auto=format&fit=crop' },
      { id: 'p5', name: 'Hosting anual', price: 80000, img: 'https://images.unsplash.com/photo-1558494949-ef010cbdcc31?q=80&w=1200&auto=format&fit=crop' },
      { id: 'p6', name: 'Identidad Visual', price: 160000, img: 'https://images.unsplash.com/photo-1496317899792-9d7dbcd928a1?q=80&w=1200&auto=format&fit=crop' },
    ];

    // Estado del carrito: { id: {id, name, price, img, qty} }
    const state = {
      cart: loadCart(),
    };

    // ====== Utilidades ======
    function saveCart(){ localStorage.setItem('cart-demo', JSON.stringify(state.cart)); }
    function loadCart(){ try{ return JSON.parse(localStorage.getItem('cart-demo')) || {}; } catch{ return {}; } }
    function calcCount(){ return Object.values(state.cart).reduce((n, it)=> n + it.qty, 0); }
    function calcTotal(){ return Object.values(state.cart).reduce((t, it)=> t + it.price * it.qty, 0); }

    // Render de cat√°logo
    const catalogEl = document.getElementById('catalog');
    function renderCatalog(){
      catalogEl.innerHTML = PRODUCTS.map(p=>`
        <article class="card" data-id="${p.id}">
          <img src="${p.img}" alt="${p.name}" loading="lazy"/>
          <div class="content">
            <div style="display:flex; align-items:center; justify-content:space-between; gap:8px">
              <strong>${p.name}</strong>
              <span class="price">${ARS.format(p.price)}</span>
            </div>
            <p class="muted">Servicio digital de ejemplo para la demo del carrito.</p>
            <div class="actions">
              <button class="btn add">Agregar</button>
              <button class="btn secondary add1">+1</button>
            </div>
          </div>
        </article>
      `).join('');

      // Listeners para agregar
      catalogEl.querySelectorAll('.card .add, .card .add1').forEach(btn=>{
        btn.addEventListener('click', (e)=>{
          const card = e.currentTarget.closest('.card');
          const id = card.dataset.id;
          const p = PRODUCTS.find(x=>x.id===id);
          addToCart(p);
        });
      });
    }

    // Agregar / quitar / setear cantidad
    function addToCart(product, qty=1){
      const item = state.cart[product.id] || { ...product, qty:0 };
      item.qty += qty;
      state.cart[product.id] = item;
      saveCart();
      renderCart();
    }
    function removeFromCart(id){ delete state.cart[id]; saveCart(); renderCart(); }
    function setQty(id, qty){
      const n = Math.max(1, Number(qty)||1);
      if(state.cart[id]){ state.cart[id].qty = n; saveCart(); renderCart(); }
    }

    // Render del carrito
    const cartLines = document.getElementById('cartLines');
    const cartCount = document.getElementById('cartCount');
    const totalText = document.getElementById('totalText');

    function renderCart(){
      const items = Object.values(state.cart);
      cartCount.textContent = calcCount();
      const total = calcTotal();
      totalText.textContent = ARS.format(total);

      if(items.length===0){
        cartLines.innerHTML = '<div class="muted">No hay productos en el carrito.</div>';
        return;
      }

      cartLines.innerHTML = items.map(it=>`
        <div class="line" data-id="${it.id}">
          <img src="${it.img}" alt="${it.name}"/>
          <div>
            <div class="name">${it.name}</div>
            <div class="muted">${ARS.format(it.price)} c/u</div>
            <div class="muted">Subtotal: <strong>${ARS.format(it.price*it.qty)}</strong></div>
          </div>
          <div style="display:grid; gap:8px; justify-items:end">
            <div class="qty">
              <button class="dec">-</button>
              <input class="q" value="${it.qty}" inputmode="numeric" />
              <button class="inc">+</button>
            </div>
            <button class="btn danger remove">Quitar</button>
          </div>
        </div>
      `).join('');

      // Controles de cantidad y eliminar
      cartLines.querySelectorAll('.line').forEach(line=>{
        const id = line.dataset.id;
        line.querySelector('.inc').addEventListener('click', ()=> setQty(id, (state.cart[id].qty+1)) );
        line.querySelector('.dec').addEventListener('click', ()=> setQty(id, (state.cart[id].qty-1)) );
        line.querySelector('.q').addEventListener('change', (e)=> setQty(id, e.target.value) );
        line.querySelector('.remove').addEventListener('click', ()=> removeFromCart(id) );
      });
    }

    // Drawer (abrir/cerrar)
    const drawer = document.getElementById('drawer');
    const openCart = document.getElementById('openCart');
    const closeCart = document.getElementById('closeCart');
    const backdrop = document.getElementById('backdrop');

    function openDrawer(){ drawer.classList.add('open'); }
    function closeDrawer(){ drawer.classList.remove('open'); }

    openCart.addEventListener('click', openDrawer);
    closeCart.addEventListener('click', closeDrawer);
    backdrop.addEventListener('click', closeDrawer);

    // Vaciar carrito
    document.getElementById('clearCart').addEventListener('click', ()=>{
      state.cart = {}; saveCart(); renderCart();
    });

    // Checkout por WhatsApp
    document.getElementById('checkoutWa').addEventListener('click', ()=>{
      const items = Object.values(state.cart);
      if(items.length===0){ alert('Tu carrito est√° vac√≠o.'); return; }
      const total = ARS.format(calcTotal());
      const lines = items.map(it=>`‚Ä¢ ${it.name} x${it.qty} ‚Äî ${ARS.format(it.price*it.qty)}`).join('\n');
      const message = `Hola! Quiero comprar estos productos:%0A%0A${encodeURIComponent(lines)}%0A%0ATotal: ${encodeURIComponent(total)}`;
      const url = `https://wa.me/${PHONE}?text=${message}`;
      window.open(url, '_blank');
    });

    // Agregar producto personalizado al carrito
    document.getElementById('addCustom').addEventListener('click', ()=>{
      const name = document.getElementById('customName').value.trim();
      const price = Number(document.getElementById('customPrice').value);
      if(!name || !price){ alert('Complet√° nombre y precio v√°lidos.'); return; }
      const id = `custom-${Date.now()}`;
      addToCart({ id, name, price, img: 'https://images.unsplash.com/photo-1545239351-1141bd82e8a6?q=80&w=1200&auto=format&fit=crop' }, 1);
      document.getElementById('customName').value = '';
      document.getElementById('customPrice').value = '';
      openDrawer();
    });

    // Arranque
    renderCatalog();
    renderCart();
  </script>
</body>
</html>